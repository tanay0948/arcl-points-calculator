<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ARCL Points & Strategy Assistant</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gradient-to-br from-indigo-100 to-blue-50 min-h-screen flex flex-col items-center p-4">
  <!-- Header -->
  <header class="text-center mt-6 mb-4">
    <h1 class="text-3xl font-bold text-blue-800">🏏 ARCL Points & Strategy Assistant</h1>
    <p class="text-gray-600">Understand rules • Plan smart • Track points live</p>
  </header>

  <!-- Navigation Tabs -->
  <div class="flex space-x-4 mb-4">
    <button id="tabRules" class="tab px-4 py-2 bg-white border border-blue-600 text-blue-700 rounded-lg font-semibold">Rules & Strategy</button>
    <button id="tabLive" class="tab px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold">Live Match</button>
    <button id="tabCompleted" class="tab px-4 py-2 bg-white border border-blue-600 text-blue-700 rounded-lg font-semibold">Completed Match</button>
  </div>

  <!-- ========== RULES TAB ========== -->
  <section id="rulesCard" class="bg-white rounded-2xl shadow-lg p-6 w-full max-w-3xl overflow-y-auto max-h-[75vh]">
    <h2 class="text-2xl font-bold text-blue-800 mb-4">📘 ARCL Rules & Examples</h2>
    <p class="text-gray-700 mb-3">
      ARCL (Amazon Recreational Cricket League) awards <strong>30 points per match</strong> — split between performance and result.
    </p>
    <div class="space-y-4 text-gray-800">
      <div>
        <h3 class="font-semibold text-blue-700">🏆 Points Breakdown</h3>
        <ul class="list-disc ml-6">
          <li>Winning team: <strong>20 points</strong> + remaining bonus from losing team.</li>
          <li>Losing team: Up to <strong>10 bonus points</strong> (batting + bowling).</li>
          <li>Tie: <strong>15 each</strong>.</li>
        </ul>
      </div>

      <div>
        <h3 class="font-semibold text-blue-700">📈 Batting Points – Losing Team</h3>
        <p>If <strong>batting second</strong>, based on % of target achieved:</p>
        <table class="w-full border text-sm mt-2">
          <thead><tr class="bg-blue-100"><th>Points</th><th>Condition</th></tr></thead>
          <tbody class="text-center">
            <tr><td>1</td><td>>50% & ≤60%</td></tr>
            <tr><td>2</td><td>>60% & ≤70%</td></tr>
            <tr><td>3</td><td>>70% & ≤80%</td></tr>
            <tr><td>4</td><td>>80% & ≤90%</td></tr>
            <tr><td>5</td><td>>90%</td></tr>
          </tbody>
        </table>
        <p class="mt-2">If <strong>batting first</strong>, based on run-rate ratio vs. winner’s run rate.</p>
      </div>

      <div>
        <h3 class="font-semibold text-blue-700">🎯 Bowling Points – Losing Team</h3>
        <table class="w-full border text-sm mt-2">
          <thead><tr class="bg-blue-100"><th>Points</th><th>Wickets Taken</th></tr></thead>
          <tbody class="text-center">
            <tr><td>1</td><td>1 wicket</td></tr>
            <tr><td>2</td><td>3 wickets</td></tr>
            <tr><td>3</td><td>5 wickets</td></tr>
            <tr><td>4</td><td>6 wickets</td></tr>
            <tr><td>5</td><td>7 wickets or All Out</td></tr>
          </tbody>
        </table>
      </div>

      <div>
        <h3 class="font-semibold text-blue-700">💡 Example</h3>
        <p>Opponent made 160. You made 145 (91%) & took 6 wickets → Batting 5 + Bowling 4 = 9 pts.<br>
          Opponent gets 20 + (10–9) = 21 pts.</p>
      </div>

      <div>
        <h3 class="font-semibold text-blue-700">🚀 Strategy to Maximize Points</h3>
        <ul class="list-disc ml-6">
          <li><strong>Batting First:</strong> Push run rate; defend hard to deny bonus points. Bowl them out to grab all 30.</li>
          <li><strong>Batting Second:</strong> Chase efficiently. Even if losing, reach 90% target & take 5+ wickets for 10 bonus pts.</li>
          <li>Keep games on time — late starts reduce overs → lower totals → fewer points.</li>
          <li>Maintain clean scorecards — penalties cost league points.</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ========== LIVE MATCH TAB ========== -->
  <section id="liveCard" class="hidden bg-white rounded-2xl shadow-lg p-6 w-full max-w-lg">
    <h2 class="text-xl font-bold mb-4 text-green-700">🏏 Live Match Strategy & Suggestions</h2>
    <div class="space-y-3">
      <div>
        <label class="block font-semibold">Who is batting first?</label>
        <select id="l_batFirst" class="w-full border p-2 rounded-md">
          <option value="us">We are batting first</option>
          <option value="them">Opponent batted first (we are chasing)</option>
        </select>
      </div>
      <div>
        <label class="block font-semibold">Your Current Score</label>
        <input id="l_yourScore" type="number" class="w-full border p-2 rounded-md" placeholder="e.g. 95">
      </div>
      <div>
        <label class="block font-semibold">Overs Faced</label>
        <input id="l_yourOvers" type="number" step="0.1" class="w-full border p-2 rounded-md" placeholder="e.g. 12">
      </div>
      <div>
        <label class="block font-semibold">Opponent Final/Target Score</label>
        <input id="l_oppScore" type="number" class="w-full border p-2 rounded-md" placeholder="e.g. 160">
      </div>
      <div>
        <label class="block font-semibold">Opponent Overs</label>
        <input id="l_oppOvers" type="number" step="0.1" class="w-full border p-2 rounded-md" placeholder="e.g. 16">
      </div>
      <div>
        <label class="block font-semibold">Wickets Taken So Far</label>
        <input id="l_wkts" type="number" class="w-full border p-2 rounded-md" placeholder="e.g. 4">
      </div>
      <button onclick="suggestLive()" class="mt-3 w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 rounded-lg">Generate Suggestions</button>
    </div>
    <div id="liveResult" class="hidden mt-6 border-t pt-4">
      <h3 class="text-lg font-bold text-green-800 mb-2">Live Recommendations</h3>
      <div id="l_suggestions" class="text-gray-700 space-y-2"></div>
    </div>
  </section>

  <!-- ========== COMPLETED MATCH TAB ========== -->
  <section id="completedCard" class="hidden bg-white rounded-2xl shadow-lg p-6 w-full max-w-lg">
    <h2 class="text-xl font-bold mb-4 text-blue-700">📊 Completed Match Points Calculator</h2>
    <div class="space-y-3">
      <input id="c_yourScore" type="number" placeholder="Your Score" class="w-full border p-2 rounded-md">
      <input id="c_yourOvers" type="number" step="0.1" placeholder="Your Overs" class="w-full border p-2 rounded-md">
      <input id="c_oppScore" type="number" placeholder="Opponent Score" class="w-full border p-2 rounded-md">
      <input id="c_oppOvers" type="number" step="0.1" placeholder="Opponent Overs" class="w-full border p-2 rounded-md">
      <input id="c_yourWkts" type="number" placeholder="Wickets Taken by You" class="w-full border p-2 rounded-md">
      <input id="c_oppWkts" type="number" placeholder="Wickets Taken by Opponent" class="w-full border p-2 rounded-md">
      <select id="c_result" class="w-full border p-2 rounded-md">
        <option value="win">We Won</option>
        <option value="lose">We Lost</option>
        <option value="tie">Tie</option>
      </select>
      <select id="c_batFirst" class="w-full border p-2 rounded-md">
        <option value="us">We Batted First</option>
        <option value="them">Opponent Batted First</option>
      </select>
      <button onclick="calculateCompleted()" class="mt-3 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded-lg">Calculate</button>
    </div>
    <div id="completedResult" class="hidden mt-6 border-t pt-4">
      <h3 class="text-lg font-bold text-blue-800 mb-2">Results</h3>
      <p id="c_yourPoints"></p>
      <p id="c_oppPoints"></p>
      <p id="c_breakdown" class="mt-2 text-gray-700"></p>
    </div>
  </section>

  <footer class="mt-6 text-gray-500 text-sm">© 2025 ARCL Helper (Unofficial)</footer>

  <script>
    // ======== Tab Logic ========
    const tabs = {
      rules: document.getElementById("tabRules"),
      live: document.getElementById("tabLive"),
      completed: document.getElementById("tabCompleted")
    };
    const sections = {
      rules: document.getElementById("rulesCard"),
      live: document.getElementById("liveCard"),
      completed: document.getElementById("completedCard")
    };
    Object.keys(tabs).forEach(id => {
      tabs[id].onclick = () => {
        Object.keys(tabs).forEach(k => {
          tabs[k].classList.remove("bg-blue-600","text-white");
          tabs[k].classList.add("bg-white","text-blue-700","border");
          sections[k].classList.add("hidden");
        });
        tabs[id].classList.remove("bg-white","text-blue-700");
        tabs[id].classList.add("bg-blue-600","text-white");
        sections[id].classList.remove("hidden");
      };
    });

    // ======== Helpers ========
    const bowlingPoints = w => w >= 7 ? 5 : w >= 6 ? 4 : w >= 5 ? 3 : w >= 3 ? 2 : w >= 1 ? 1 : 0;
    const thresholds = [0.5,0.6,0.7,0.8,0.9];

    // ======== Completed Match ========
    function calculateCompleted() {
      const s = id => parseFloat(document.getElementById(id).value);
      const yourScore=s("c_yourScore"), yourOvers=s("c_yourOvers"), oppScore=s("c_oppScore"), oppOvers=s("c_oppOvers"),
            yourWkts=s("c_yourWkts"), oppWkts=s("c_oppWkts");
      const result=document.getElementById("c_result").value, batFirst=document.getElementById("c_batFirst").value==="us";
      if([yourScore,oppScore].some(isNaN)) return alert("Please fill in all fields.");

      function batPts(bFirst, ys, yo, os, oo, won) {
        if(won) return 0;
        if(bFirst){const rate=(ys/yo)/(os/oo);return thresholds.filter(t=>rate>t).length;}
        else{const pct=ys/os;return thresholds.filter(t=>pct>t).length;}
      }

      const youWon=result==="win", tie=result==="tie", youLost=result==="lose";
      let yourBat=0,yourBowl=0,oppBat=0,oppBowl=0;

      if(youLost){
        yourBat=batPts(batFirst,yourScore,yourOvers,oppScore,oppOvers,false);
        yourBowl=bowlingPoints(yourWkts);
        oppBat=batPts(!batFirst,oppScore,oppOvers,yourScore,yourOvers,true);
        oppBowl=bowlingPoints(oppWkts);
      }else if(youWon){
        oppBat=batPts(!batFirst,oppScore,oppOvers,yourScore,yourOvers,false);
        oppBowl=bowlingPoints(oppWkts);
      }

      let yourTotal=0,oppTotal=0;
      if(tie) yourTotal=oppTotal=15;
      else if(youWon){yourTotal=20+(10-(oppBat+oppBowl));oppTotal=oppBat+oppBowl;}
      else if(youLost){yourTotal=yourBat+yourBowl;oppTotal=20+(10-yourTotal);}

      document.getElementById("c_yourPoints").innerText=`Your Total: ${yourTotal}`;
      document.getElementById("c_oppPoints").innerText=`Opponent Total: ${oppTotal}`;
      document.getElementById("c_breakdown").innerText=`You(Bat ${yourBat}, Bowl ${yourBowl}) | Opponent(Bat ${oppBat}, Bowl ${oppBowl})`;
      document.getElementById("completedResult").classList.remove("hidden");
    }

    // ======== Live Match Strategy ========
    function suggestLive() {
      const yourScore=parseFloat(document.getElementById("l_yourScore").value),
            yourOvers=parseFloat(document.getElementById("l_yourOvers").value),
            oppScore=parseFloat(document.getElementById("l_oppScore").value),
            oppOvers=parseFloat(document.getElementById("l_oppOvers").value),
            wkts=parseFloat(document.getElementById("l_wkts").value),
            batFirst=document.getElementById("l_batFirst").value==="us";
      if([yourScore,yourOvers,oppScore,oppOvers].some(isNaN)) return alert("Please fill in all required fields.");

      const sgs=[];
      if(batFirst){
        const rr=(yourScore/yourOvers)/(oppScore/oppOvers);
        const pts=thresholds.filter(t=>rr>t).length;
        const next=thresholds[pts];
        sgs.push(`📊 Current run rate ratio: ${(rr*100).toFixed(1)}%. Batting points now: ${pts}.`);
        if(pts<5){
          const needRate=next*(oppScore/oppOvers);
          const needRuns=Math.ceil(needRate*yourOvers-yourScore);
          sgs.push(`🏏 Need ≈ ${needRuns} more runs to cross ${(next*100)}% run rate → +1 batting point.`);
        } else sgs.push("✅ You’re on track for full batting points!");
      } else {
        const pct=yourScore/oppScore;
        const pts=thresholds.filter(t=>pct>t).length;
        const next=thresholds[pts];
        sgs.push(`📊 Current target progress: ${(pct*100).toFixed(1)}%. Batting points now: ${pts}.`);
        if(pts<5){
          const needRuns=Math.ceil(next*oppScore-yourScore);
          sgs.push(`🏏 Need ${needRuns} more runs to cross ${(next*100)}% target → +1 batting point.`);
        } else sgs.push("✅ You’re on track for full batting points!");
      }

      const bowl=bowlingPoints(wkts);
      if(bowl<5){
        const milestones=[1,3,5,6,7];
        const next=milestones.find(m=>m>wkts);
        sgs.push(`🎯 Take ${next-wkts} more wicket${next-wkts>1?"s":""} to reach ${bowl+1} bowling point(s).`);
      } else sgs.push("🔥 You’ve maxed out bowling points!");

      sgs.push(batFirst
        ? "🔍 Strategy: Accelerate scoring between overs 12–16 to push RR 90%+, then attack with power hitters."
        : "🔍 Strategy: Focus on partnerships. If 10–20 runs behind target %, increase strike rotation and boundary rate."
      );

      document.getElementById("l_suggestions").innerHTML=sgs.map(s=>`<div class='p-2 bg-green-50 rounded-lg'>${s}</div>`).join("");
      document.getElementById("liveResult").classList.remove("hidden");
    }
  </script>
</body>
</html>
